language: elixir

elixir:
  - '1.8.1'
otp_release:
  - '21.2.6'

install:
  mix local.rebar --force; mix local.hex --force; mix deps.get

stages:
  - test
  - name: docker_build
    if: (tag =~ ^v) AND (branch = automatic-semver)
  # - deploy

jobs:
  include:
    - stage: test
      name: "Unit Tests"
      script: mix test --cover
    - stage: test
      name: "Credo"
      script: mix credo --strict
    - stage: docker_build
      script: echo "something here to test"
